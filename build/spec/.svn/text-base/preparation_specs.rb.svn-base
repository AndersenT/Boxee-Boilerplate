require 'rspec'
require 'FileUtils'
require './lib/preparation'

describe Preparation, "copying valid files ready for packaging" do
  
  before :each do
    @sys_files = 2
    @to = './spec/copied/'
    FileUtils.rm_rf @to
    
    Preparation.copy_valid_files './spec/assets/copying', @to   
  end
  
  it "should not copy any inavlid files" do

    Dir.new("#{@to}/invalid_files").should have(0 + @sys_files).entries

  end
  
  it "should copy valid files" do

    Dir.new("#{@to}/valid_files").should have(4 + @sys_files).entries

  end
  
end